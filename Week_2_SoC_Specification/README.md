#  Fundamentals of System-on-Chip (SoC) Design

## ‚öôÔ∏è System-on-Chip (SoC)

A System-on-Chip (SoC) is essentially a complete computer integrated into a single silicon chip.
It combines multiple functional blocks ‚Äî CPU, GPU, memory, I/O interfaces, DSP, power management, and connectivity modules ‚Äî into one highly optimized semiconductor package.

üéØ Why SoCs Matter
üß© Compact Integration

Brings all major components onto a single die ‚Äî ideal for mobile, IoT, and embedded systems where space is critical.

üîã Energy Efficiency

Optimized for low power consumption, enhancing battery life in wearables and smart devices.

‚ö° High Performance

Enables fast on-chip communication with minimal latency compared to multi-chip solutions.

üí∞ Cost Efficiency

Reduces the bill of materials (BoM) and manufacturing complexity ‚Äî one chip does the work of many.

## VSD BabySoC Overview

The VSDBabySoC is a simple SoC (System-on-Chip) design incorporating a RISC-V processor (rvmyth), a PLL (Phase-Locked Loop) module (pll), and a DAC (Digital-to-Analog Converter) module (dac). This project demonstrates integration of these ''' IP cores ''' and aims to simulate and verify the design behavior using pre-synthesis and post-synthesis simulations.

<img width="1248" height="698" alt="image" src="https://github.com/user-attachments/assets/722f0907-d89e-4d40-8b77-a32326ecdbd4" />


# Project Structure
‚úî src/include/ - Contains header files (*.vh) with necessary macros or parameter definitions.

‚úî src/module/ - Contains Verilog files for each module in the SoC design.

‚úî output/ - Directory where compiled outputs and simulation files will be generated.

# Step-by-Step Guide

## 1. Setup and Prepare Project Directory

## Module Descriptions

### 2.1 vsdbabysoc.v (Top-Level SoC Module)
This is the top-level module that integrates the rvmyth, pll, and dac modules.
[VSDBabySoC](https://github.com/mamlit/VSDBabySoC.git)

- **Inputs:**
  - reset: Resets the core processor.
  - VCO_IN, EHD_CP, EHD_VCO, REF: PLL control signals.
  - WRFHL: DAC reference voltage.
- **Outputs:**
  - OUT: Analog output from DAC.
- **Connections:**
  - RV_TO_DAC: A 18-bit bus that connects the RISC-V core output to the DAC input.
  - CLK: The clock signal generated by the PLL.

### 2.2 rvmyth.v (RISC-V Core)
The rvmyth module is a simple RISC-V based processor. It outputs a 10-bit digital signal (OUT) to be converted by the DAC.
[rvmyth](https://github.com/kunalq123/rvmyth/)

- **Inputs:**
  - CLK: Clock signal generated by the PLL.
  - reset: Initializes or resets the processor.
- **Outputs:**
  - OUT: A 18-bit digital signal representing processed data to be sent to the DAC.

### 2.3 avsdpil.v (PLL Module)
The pll module is a phase-locked loop that generates a stable clock (CLK) for the RISC-V core.
[Introduction](https://github.com/ireneam7J3/PLL.git) [avsdpil](https://github.com/lakshmi-sathr/avsdpil_v6.git)

- **Inputs:**
  - VCO_IN, EHD_CP, EHD_VCO, REF: Control and reference signals for PLL operation.
- **Outputs:**
  - CLK: A stable clock signal for synchronizing the core and other modules.

### 2.4 avsddac.v (DAC Module)
The dac module converts the 10-bit digital signal from the rvmyth core to an analog output.
[avsddac](https://github.com/vsdjp/rvmyth_avsddac_interface.git)

- **Inputs:**
  - D: A 18-bit digital input from the processor.
  - WRFHL: Reference voltage for the DAC.
- **Outputs:**
  - OUT: Analog output signal.

## Testbench

The testbench.v file is a test module to verify the functionality of vsdbabysoc. It includes signal initialization, clock generation, and waveform dumping for both pre-synthesis and post-synthesis simulations.

**Waveform Output:**
- pre_synth_sim.vcd or post_synth_sim.vcd files generated based on simulation conditions.

## Simulation Steps

### Pre-Synthesis Simulation

Run the following command to perform a pre-synthesis simulation:

```bash
iverilog -o output/pre_synth_sim/pre_synth_sim.out -DPRE_SYNTH_SIM \
+incdir+src/includes +incdir+src/module \

src/module/testbench.v src/module/vsdbabysoc.v

cd output/pre_synth_sim \

./pre_synth_sim.out
```

### üìä View in GTKWave:
```bash
gtkwave output/pre_synth_sim/pre_synth_sim.vcd
```

<img width="1600" height="782" alt="image" src="https://github.com/user-attachments/assets/ac41f58d-9f81-43da-b4c2-4cc0433a1579" />


### üß† The Instruction Program Driving BabySoC

The CPU executes a program that:

Increments counters

Accumulates values into r17

Oscillates them to generate analog waveforms

Holds in a final loop

| Instruction | Action | Description |
|-------------|--------|-------------|
| 0 | ADDI r9, r0, 1 | r9 = 1 (decrement step) |
| 1 | ADDI r10, r0, 43 | r10 = 43 (loop limit) |
| 2 | ADDI r11, r0, 0 | r11 = 0 (counter) |
| 3 | ADDI r17, r0, 0 | r17 = 0 (DAC input) |
| 4 | ADD r17, r17, r11 | Accumulate into r17 |
| 5 | ADDI r11, r11, 1 | Increment counter |
| 6 | BNE r11, r10, -4 | Repeat until r11=43 |
| 7 | ADD r17, r17, r11 | r17 += r11 |
| 8 | SUB r17, r17, r11 | r17 -= r11 |
| 9 | SUB r11, r11, r9 | r11-- |
| 10 | BNE r11, r9, -4 | Loop until r11=1 |
| 11 | SUB r17, r17, r11 | Final adjust |
| 12 | BEQ r0, r0, ... | Infinite loop |

# Numerics for DAC Conversion

## Scaling Formula

$$V_{OUT} = \frac{r_{17}}{1023} \times V_{REF\_SPAN} \quad (\text{with } V_{REF\_SPAN} = 1.0 \, \text{V})$$

## Example Calculations

For $r17 = 903$:

$$V_{OUT} = \frac{903}{1023} \times 1.0 = 0.88221 \, \text{V}$$

For the peak $r17 = 946$:

$$V_{OUT} = \frac{946}{1023} \times 1.0 = 0.92502 \, \text{V}$$

## Example Output Values (VREF = 1.0 V)

| r17 Value | DAC Output Voltage |
|-----------|-------------------|
| 903       | 0.882 V           |
| 946 (peak)| 0.925 V           |

Switch our format ‚Üí Analog Step in GTKWave for DAC output visualization.








